var app=function(){"use strict";function t(){}const n=t=>t;function e(t,n){for(const e in n)t[e]=n[e];return t}function o(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(o)}function s(t){return"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function u(t,n,o,r){return t[1]&&r?e(o.ctx.slice(),t[1](r(n))):o.ctx}function a(t,n){const e={};n=new Set(n);for(const o in t)n.has(o)||"$"===o[0]||(e[o]=t[o]);return e}const l="undefined"!=typeof window;let f=l?()=>window.performance.now():()=>Date.now(),d=l?t=>requestAnimationFrame(t):t;const p=new Set;function g(t){p.forEach((n=>{n.c(t)||(p.delete(n),n.f())})),0!==p.size&&d(g)}function h(t){let n;return 0===p.size&&d(g),{promise:new Promise((e=>{p.add(n={c:t,f:e})})),abort(){p.delete(n)}}}function m(t,n){t.appendChild(n)}function y(t){if(!t)return document;const n=t.getRootNode?t.getRootNode():t.ownerDocument;return n&&n.host?n:t.ownerDocument}function v(t){const n=b("style");return function(t,n){m(t.head||t,n)}(y(t),n),n}function x(t,n,e){t.insertBefore(n,e||null)}function $(t){t.parentNode.removeChild(t)}function b(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function k(){return w(" ")}function _(){return w("")}function S(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function j(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function C(t,n){const e=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in n)null==n[o]?t.removeAttribute(o):"style"===o?t.style.cssText=n[o]:"__value"===o?t.value=t[o]=n[o]:e[o]&&e[o].set?t[o]=n[o]:j(t,o,n[o])}function O(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function z(t,n){t.value=null==n?"":n}function A(t,n,e,o){t.style.setProperty(n,e,o?"important":"")}const E=new Set;let D,M=0;function P(t,n,e,o,r,i,s,c=0){const u=16.666/o;let a="{\n";for(let t=0;t<=1;t+=u){const o=n+(e-n)*i(t);a+=100*t+`%{${s(o,1-o)}}\n`}const l=a+`100% {${s(e,1-e)}}\n}`,f=`__svelte_${function(t){let n=5381,e=t.length;for(;e--;)n=(n<<5)-n^t.charCodeAt(e);return n>>>0}(l)}_${c}`,d=y(t);E.add(d);const p=d.__svelte_stylesheet||(d.__svelte_stylesheet=v(t).sheet),g=d.__svelte_rules||(d.__svelte_rules={});g[f]||(g[f]=!0,p.insertRule(`@keyframes ${f} ${l}`,p.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?`${h}, `:""}${f} ${o}ms linear ${r}ms 1 both`,M+=1,f}function N(t,n){const e=(t.style.animation||"").split(", "),o=e.filter(n?t=>t.indexOf(n)<0:t=>-1===t.indexOf("__svelte")),r=e.length-o.length;r&&(t.style.animation=o.join(", "),M-=r,M||d((()=>{M||(E.forEach((t=>{const n=t.__svelte_stylesheet;let e=n.cssRules.length;for(;e--;)n.deleteRule(e);t.__svelte_rules={}})),E.clear())})))}function R(t){D=t}function q(t){(function(){if(!D)throw new Error("Function called outside component initialization");return D})().$$.on_destroy.push(t)}const T=[],I=[],B=[],G=[],V=Promise.resolve();let X=!1;function F(t){B.push(t)}let L=!1;const U=new Set;function W(){if(!L){L=!0;do{for(let t=0;t<T.length;t+=1){const n=T[t];R(n),H(n.$$)}for(R(null),T.length=0;I.length;)I.pop()();for(let t=0;t<B.length;t+=1){const n=B[t];U.has(n)||(U.add(n),n())}B.length=0}while(T.length);for(;G.length;)G.pop()();X=!1,L=!1,U.clear()}}function H(t){if(null!==t.fragment){t.update(),i(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(F)}}let J;function K(){return J||(J=Promise.resolve(),J.then((()=>{J=null}))),J}function Q(t,n,e){t.dispatchEvent(function(t,n,e=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e,!1,n),o}(`${n?"intro":"outro"}${e}`))}const Y=new Set;let Z;function tt(t,n){t&&t.i&&(Y.delete(t),t.i(n))}function nt(t,n,e,o){if(t&&t.o){if(Y.has(t))return;Y.add(t),Z.c.push((()=>{Y.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}const et={duration:0};function ot(e,o,r,c){let u=o(e,r),a=c?0:1,l=null,d=null,p=null;function g(){p&&N(e,p)}function m(t,n){const e=t.b-a;return n*=Math.abs(e),{a:a,b:t.b,d:e,duration:n,start:t.start,end:t.start+n,group:t.group}}function y(o){const{delay:r=0,duration:s=300,easing:c=n,tick:y=t,css:v}=u||et,x={start:f()+r,b:o};o||(x.group=Z,Z.r+=1),l||d?d=x:(v&&(g(),p=P(e,a,o,s,r,c,v)),o&&y(0,1),l=m(x,s),F((()=>Q(e,o,"start"))),h((t=>{if(d&&t>d.start&&(l=m(d,s),d=null,Q(e,l.b,"start"),v&&(g(),p=P(e,a,l.b,l.duration,0,c,u.css))),l)if(t>=l.end)y(a=l.b,1-a),Q(e,l.b,"end"),d||(l.b?g():--l.group.r||i(l.group.c)),l=null;else if(t>=l.start){const n=t-l.start;a=l.a+l.d*c(n/l.duration),y(a,1-a)}return!(!l&&!d)})))}return{run(t){s(u)?K().then((()=>{u=u(),y(t)})):y(t)},end(){g(),l=d=null}}}function rt(t,n){t.d(1),n.delete(t.key)}function it(t){t&&t.c()}function st(t,n,e,r){const{fragment:c,on_mount:u,on_destroy:a,after_update:l}=t.$$;c&&c.m(n,e),r||F((()=>{const n=u.map(o).filter(s);a?a.push(...n):i(n),t.$$.on_mount=[]})),l.forEach(F)}function ct(t,n){const e=t.$$;null!==e.fragment&&(i(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function ut(t,n){-1===t.$$.dirty[0]&&(T.push(t),X||(X=!0,V.then(W)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function at(n,e,o,s,c,u,a,l=[-1]){const f=D;R(n);const d=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:r(),dirty:l,skip_bound:!1,root:e.target||f.$$.root};a&&a(d.root);let p=!1;if(d.ctx=o?o(n,e.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return d.ctx&&c(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),p&&ut(n,t)),e})):[],d.update(),p=!0,i(d.before_update),d.fragment=!!s&&s(d.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);d.fragment&&d.fragment.l(t),t.forEach($)}else d.fragment&&d.fragment.c();e.intro&&tt(n.$$.fragment),st(n,e.target,e.anchor,e.customElement),W()}R(f)}class lt{$destroy(){ct(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var ft="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},dt={exports:{}};(function(t,n,e){function o(t){var n,e=this,o=(n=4022871197,function(t){t=String(t);for(var e=0;e<t.length;e++){var o=.02519603282416938*(n+=t.charCodeAt(e));o-=n=o>>>0,n=(o*=n)>>>0,n+=4294967296*(o-=n)}return 2.3283064365386963e-10*(n>>>0)});e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=o(" "),e.s1=o(" "),e.s2=o(" "),e.s0-=o(t),e.s0<0&&(e.s0+=1),e.s1-=o(t),e.s1<0&&(e.s1+=1),e.s2-=o(t),e.s2<0&&(e.s2+=1),o=null}function r(t,n){return n.c=t.c,n.s0=t.s0,n.s1=t.s1,n.s2=t.s2,n}function i(t,n){var e=new o(t),i=n&&n.state,s=e.next;return s.int32=function(){return 4294967296*e.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,i&&("object"==typeof i&&r(i,e),s.state=function(){return r(e,{})}),s}n&&n.exports?n.exports=i:e&&e.amd?e((function(){return i})):this.alea=i})(0,dt,!1);var pt={exports:{}};!function(t){!function(t,n,e){function o(t){var n=this,e="";n.x=0,n.y=0,n.z=0,n.w=0,n.next=function(){var t=n.x^n.x<<11;return n.x=n.y,n.y=n.z,n.z=n.w,n.w^=n.w>>>19^t^t>>>8},t===(0|t)?n.x=t:e+=t;for(var o=0;o<e.length+64;o++)n.x^=0|e.charCodeAt(o),n.next()}function r(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n}function i(t,n){var e=new o(t),i=n&&n.state,s=function(){return(e.next()>>>0)/4294967296};return s.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=e.next,s.quick=s,i&&("object"==typeof i&&r(i,e),s.state=function(){return r(e,{})}),s}n&&n.exports?n.exports=i:e&&e.amd?e((function(){return i})):this.xor128=i}(0,t,!1)}(pt);var gt={exports:{}};!function(t){!function(t,n,e){function o(t){var n=this,e="";n.next=function(){var t=n.x^n.x>>>2;return n.x=n.y,n.y=n.z,n.z=n.w,n.w=n.v,(n.d=n.d+362437|0)+(n.v=n.v^n.v<<4^t^t<<1)|0},n.x=0,n.y=0,n.z=0,n.w=0,n.v=0,t===(0|t)?n.x=t:e+=t;for(var o=0;o<e.length+64;o++)n.x^=0|e.charCodeAt(o),o==e.length&&(n.d=n.x<<10^n.x>>>4),n.next()}function r(t,n){return n.x=t.x,n.y=t.y,n.z=t.z,n.w=t.w,n.v=t.v,n.d=t.d,n}function i(t,n){var e=new o(t),i=n&&n.state,s=function(){return(e.next()>>>0)/4294967296};return s.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=e.next,s.quick=s,i&&("object"==typeof i&&r(i,e),s.state=function(){return r(e,{})}),s}n&&n.exports?n.exports=i:e&&e.amd?e((function(){return i})):this.xorwow=i}(0,t,!1)}(gt);var ht={exports:{}};!function(t){!function(t,n,e){function o(t){var n=this;n.next=function(){var t,e,o=n.x,r=n.i;return t=o[r],e=(t^=t>>>7)^t<<24,e^=(t=o[r+1&7])^t>>>10,e^=(t=o[r+3&7])^t>>>3,e^=(t=o[r+4&7])^t<<7,t=o[r+7&7],e^=(t^=t<<13)^t<<9,o[r]=e,n.i=r+1&7,e},function(t,n){var e,o=[];if(n===(0|n))o[0]=n;else for(n=""+n,e=0;e<n.length;++e)o[7&e]=o[7&e]<<15^n.charCodeAt(e)+o[e+1&7]<<13;for(;o.length<8;)o.push(0);for(e=0;e<8&&0===o[e];++e);for(8==e&&(o[7]=-1),t.x=o,t.i=0,e=256;e>0;--e)t.next()}(n,t)}function r(t,n){return n.x=t.x.slice(),n.i=t.i,n}function i(t,n){null==t&&(t=+new Date);var e=new o(t),i=n&&n.state,s=function(){return(e.next()>>>0)/4294967296};return s.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=e.next,s.quick=s,i&&(i.x&&r(i,e),s.state=function(){return r(e,{})}),s}n&&n.exports?n.exports=i:e&&e.amd?e((function(){return i})):this.xorshift7=i}(0,t,!1)}(ht);var mt={exports:{}};!function(t){!function(t,n,e){function o(t){var n=this;n.next=function(){var t,e,o=n.w,r=n.X,i=n.i;return n.w=o=o+1640531527|0,e=r[i+34&127],t=r[i=i+1&127],e^=e<<13,t^=t<<17,e^=e>>>15,t^=t>>>12,e=r[i]=e^t,n.i=i,e+(o^o>>>16)|0},function(t,n){var e,o,r,i,s,c=[],u=128;for(n===(0|n)?(o=n,n=null):(n+="\0",o=0,u=Math.max(u,n.length)),r=0,i=-32;i<u;++i)n&&(o^=n.charCodeAt((i+32)%n.length)),0===i&&(s=o),o^=o<<10,o^=o>>>15,o^=o<<4,o^=o>>>13,i>=0&&(s=s+1640531527|0,r=0==(e=c[127&i]^=o+s)?r+1:0);for(r>=128&&(c[127&(n&&n.length||0)]=-1),r=127,i=512;i>0;--i)o=c[r+34&127],e=c[r=r+1&127],o^=o<<13,e^=e<<17,o^=o>>>15,e^=e>>>12,c[r]=o^e;t.w=s,t.X=c,t.i=r}(n,t)}function r(t,n){return n.i=t.i,n.w=t.w,n.X=t.X.slice(),n}function i(t,n){null==t&&(t=+new Date);var e=new o(t),i=n&&n.state,s=function(){return(e.next()>>>0)/4294967296};return s.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=e.next,s.quick=s,i&&(i.X&&r(i,e),s.state=function(){return r(e,{})}),s}n&&n.exports?n.exports=i:e&&e.amd?e((function(){return i})):this.xor4096=i}(0,t,!1)}(mt);var yt={exports:{}};!function(t){!function(t,n,e){function o(t){var n=this,e="";n.next=function(){var t=n.b,e=n.c,o=n.d,r=n.a;return t=t<<25^t>>>7^e,e=e-o|0,o=o<<24^o>>>8^r,r=r-t|0,n.b=t=t<<20^t>>>12^e,n.c=e=e-o|0,n.d=o<<16^e>>>16^r,n.a=r-t|0},n.a=0,n.b=0,n.c=-1640531527,n.d=1367130551,t===Math.floor(t)?(n.a=t/4294967296|0,n.b=0|t):e+=t;for(var o=0;o<e.length+20;o++)n.b^=0|e.charCodeAt(o),n.next()}function r(t,n){return n.a=t.a,n.b=t.b,n.c=t.c,n.d=t.d,n}function i(t,n){var e=new o(t),i=n&&n.state,s=function(){return(e.next()>>>0)/4294967296};return s.double=function(){do{var t=((e.next()>>>11)+(e.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=e.next,s.quick=s,i&&("object"==typeof i&&r(i,e),s.state=function(){return r(e,{})}),s}n&&n.exports?n.exports=i:e&&e.amd?e((function(){return i})):this.tychei=i}(0,t,!1)}(yt);var vt={exports:{}};!function(t){!function(n,e,o){var r,i=256,s=o.pow(i,6),c=o.pow(2,52),u=2*c,a=255;function l(t,a,l){var m=[],y=g(p((a=1==a?{entropy:!0}:a||{}).entropy?[t,h(e)]:null==t?function(){try{var t;return r&&(t=r.randomBytes)?t=t(i):(t=new Uint8Array(i),(n.crypto||n.msCrypto).getRandomValues(t)),h(t)}catch(t){var o=n.navigator,s=o&&o.plugins;return[+new Date,n,s,n.screen,h(e)]}}():t,3),m),v=new f(m),x=function(){for(var t=v.g(6),n=s,e=0;t<c;)t=(t+e)*i,n*=i,e=v.g(1);for(;t>=u;)t/=2,n/=2,e>>>=1;return(t+e)/n};return x.int32=function(){return 0|v.g(4)},x.quick=function(){return v.g(4)/4294967296},x.double=x,g(h(v.S),e),(a.pass||l||function(t,n,e,r){return r&&(r.S&&d(r,v),t.state=function(){return d(v,{})}),e?(o.random=t,n):t})(x,y,"global"in a?a.global:this==o,a.state)}function f(t){var n,e=t.length,o=this,r=0,s=o.i=o.j=0,c=o.S=[];for(e||(t=[e++]);r<i;)c[r]=r++;for(r=0;r<i;r++)c[r]=c[s=a&s+t[r%e]+(n=c[r])],c[s]=n;(o.g=function(t){for(var n,e=0,r=o.i,s=o.j,c=o.S;t--;)n=c[r=a&r+1],e=e*i+c[a&(c[r]=c[s=a&s+n])+(c[s]=n)];return o.i=r,o.j=s,e})(i)}function d(t,n){return n.i=t.i,n.j=t.j,n.S=t.S.slice(),n}function p(t,n){var e,o=[],r=typeof t;if(n&&"object"==r)for(e in t)try{o.push(p(t[e],n-1))}catch(t){}return o.length?o:"string"==r?t:t+"\0"}function g(t,n){for(var e,o=t+"",r=0;r<o.length;)n[a&r]=a&(e^=19*n[a&r])+o.charCodeAt(r++);return h(n)}function h(t){return String.fromCharCode.apply(0,t)}if(g(o.random(),e),t.exports){t.exports=l;try{r=require("crypto")}catch(t){}}else o.seedrandom=l}("undefined"!=typeof self?self:ft,[],Math)}(vt);var xt=dt.exports,$t=pt.exports,bt=gt.exports,wt=ht.exports,kt=mt.exports,_t=yt.exports,St=vt.exports;St.alea=xt,St.xor128=$t,St.xorwow=bt,St.xorshift7=wt,St.xor4096=kt,St.tychei=_t;var jt,Ct=St,Ot=new Uint8Array(16);function zt(){if(!jt&&!(jt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return jt(Ot)}var At=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Et(t){return"string"==typeof t&&At.test(t)}for(var Dt=[],Mt=0;Mt<256;++Mt)Dt.push((Mt+256).toString(16).substr(1));function Pt(t,n,e){var o=(t=t||{}).random||(t.rng||zt)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){e=e||0;for(var r=0;r<16;++r)n[e+r]=o[r];return n}return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(Dt[t[n+0]]+Dt[t[n+1]]+Dt[t[n+2]]+Dt[t[n+3]]+"-"+Dt[t[n+4]]+Dt[t[n+5]]+"-"+Dt[t[n+6]]+Dt[t[n+7]]+"-"+Dt[t[n+8]]+Dt[t[n+9]]+"-"+Dt[t[n+10]]+Dt[t[n+11]]+Dt[t[n+12]]+Dt[t[n+13]]+Dt[t[n+14]]+Dt[t[n+15]]).toLowerCase();if(!Et(e))throw TypeError("Stringified UUID is invalid");return e}(o)}function Nt(){return{type:"snake",bodyPart:"head",id:Pt()}}function Rt({index:t}){return{type:"snake",bodyPart:"trunk",index:t,id:Pt()}}function qt(){return{type:"snake",bodyPart:"tail",id:Pt()}}function Tt(){return{type:"food",id:Pt()}}function It(){return{type:"empty",id:Pt()}}const Bt=32,Gt=17;const Vt=[["left","right"].sort().join(","),["up","down"].sort().join(",")];const Xt=(Ft=32,new Array(17).fill(null).map((()=>new Array(Ft).fill(null))).map(((t,n)=>t.map(((t,e)=>({x:n,y:e}))))).flat());var Ft;function Lt(t,n){const e=Xt.filter((({x:t,y:e})=>{var o;return"snake"!==(null===(o=n[t][e])||void 0===o?void 0:o.type)}));return e[function(t,{max:n,min:e=0}){const o=Ct(t);return()=>e+Math.floor(o()*n)}(t,{max:e.length})()]}function Ut(t,n,e){const o=t.slice();return o[1]=n[e],o}function Wt(t,n,e){const o=t.slice();return o[4]=n[e],o}function Ht(t,n){let e,o;return{key:t,first:null,c(){e=b("div"),j(e,"class",o="square "+Qt(n[4])+" svelte-15avj0d"),this.first=e},m(t,n){x(t,e,n)},p(t,r){n=t,1&r&&o!==(o="square "+Qt(n[4])+" svelte-15avj0d")&&j(e,"class",o)},d(t){t&&$(e)}}}function Jt(t){let n,e=[],o=new Map,r=t[1];const i=t=>t[4].id;for(let n=0;n<r.length;n+=1){let s=Wt(t,r,n),c=i(s);o.set(c,e[n]=Ht(c,s))}return{c(){for(let t=0;t<e.length;t+=1)e[t].c();n=_()},m(t,o){for(let n=0;n<e.length;n+=1)e[n].m(t,o);x(t,n,o)},p(t,s){1&s&&(r=t[1],e=function(t,n,e,o,r,i,s,c,u,a,l,f){let d=t.length,p=i.length,g=d;const h={};for(;g--;)h[t[g].key]=g;const m=[],y=new Map,v=new Map;for(g=p;g--;){const t=f(r,i,g),c=e(t);let u=s.get(c);u?o&&u.p(t,n):(u=a(c,t),u.c()),y.set(c,m[g]=u),c in h&&v.set(c,Math.abs(g-h[c]))}const x=new Set,$=new Set;function b(t){tt(t,1),t.m(c,l),s.set(t.key,t),l=t.first,p--}for(;d&&p;){const n=m[p-1],e=t[d-1],o=n.key,r=e.key;n===e?(l=n.first,d--,p--):y.has(r)?!s.has(o)||x.has(o)?b(n):$.has(r)?d--:v.get(o)>v.get(r)?($.add(o),b(n)):(x.add(r),d--):(u(e,s),d--)}for(;d--;){const n=t[d];y.has(n.key)||u(n,s)}for(;p;)b(m[p-1]);return m}(e,s,i,1,t,r,o,n.parentNode,rt,Ht,n,Wt))},d(t){for(let n=0;n<e.length;n+=1)e[n].d(t);t&&$(n)}}}function Kt(n){let e,o=n[0].field,r=[];for(let t=0;t<o.length;t+=1)r[t]=Jt(Ut(n,o,t));return{c(){e=b("div");for(let t=0;t<r.length;t+=1)r[t].c();j(e,"class","snakeBox svelte-15avj0d"),A(e,"--width",32),A(e,"--height",17)},m(t,n){x(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,[n]){if(1&n){let i;for(o=t[0].field,i=0;i<o.length;i+=1){const s=Ut(t,o,i);r[i]?r[i].p(s,n):(r[i]=Jt(s),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}},i:t,o:t,d(t){t&&$(e),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(r,t)}}}function Qt(t){return"snake"===(null==t?void 0:t.type)?`snake ${t.bodyPart}`:"food"===(null==t?void 0:t.type)?"food":""}function Yt(t,n,e){let{gameState:o}=n;return t.$$set=t=>{"gameState"in t&&e(0,o=t.gameState)},[o]}class Zt extends lt{constructor(t){super(),at(this,t,Yt,Kt,c,{gameState:0})}}const tn=[];function nn(n,e=t){let o;const r=new Set;function i(t){if(c(n,t)&&(n=t,o)){const t=!tn.length;for(const t of r)t[1](),tn.push(t,n);if(t){for(let t=0;t<tn.length;t+=2)tn[t][0](tn[t+1]);tn.length=0}}}return{set:i,update:function(t){i(t(n))},subscribe:function(s,c=t){const u=[s,c];return r.add(u),1===r.size&&(o=e(i)||t),s(n),()=>{r.delete(u),0===r.size&&(o(),o=null)}}}}function en(n){let e,o,r;return{c(){e=w("Score: "),o=b("span"),r=w(n[0])},m(t,n){x(t,e,n),x(t,o,n),m(o,r)},p(t,[n]){1&n&&O(r,t[0])},i:t,o:t,d(t){t&&$(e),t&&$(o)}}}function on(t,n,e){const o=function(t=0,n={countDelay:20}){const{subscribe:e,update:o}=nn(t);let r=t;return{subscribe:e,newScore(t){if(t<r){const n=1500/(r-t);if(n<4)o((()=>t));else for(let e=r;e>t;e--)setTimeout((()=>o((t=>t-1))),e*n)}else for(let e=1;e<=t-r;e++)setTimeout((()=>o((t=>t+1))),e*n.countDelay);r=t}}}();let{current:r=0}=n,i=r;return o.subscribe((t=>e(0,i=t))),t.$$set=t=>{"current"in t&&e(1,r=t.current)},t.$$.update=()=>{2&t.$$.dirty&&o.newScore(r)},[i,r]}class rn extends lt{constructor(t){super(),at(this,t,on,en,c,{current:1})}}const sn=t=>({hovering:1&t}),cn=t=>({hovering:t[0]});function un(t){let n,o,r,s;const c=t[5].default,a=function(t,n,e,o){if(t){const r=u(t,n,e,o);return t[0](r)}}(c,t,t[4],cn);let l=[t[3]],f={};for(let t=0;t<l.length;t+=1)f=e(f,l[t]);return{c(){n=b("div"),a&&a.c(),C(n,f)},m(e,i){x(e,n,i),a&&a.m(n,null),o=!0,r||(s=[S(n,"mouseenter",t[1]),S(n,"mouseleave",t[2])],r=!0)},p(t,[e]){a&&a.p&&(!o||17&e)&&function(t,n,e,o,r,i){if(r){const s=u(n,e,o,i);t.p(s,r)}}(a,c,t,t[4],o?function(t,n,e,o){if(t[2]&&o){const r=t[2](o(e));if(void 0===n.dirty)return r;if("object"==typeof r){const t=[],e=Math.max(n.dirty.length,r.length);for(let o=0;o<e;o+=1)t[o]=n.dirty[o]|r[o];return t}return n.dirty|r}return n.dirty}(c,t[4],e,sn):function(t){if(t.ctx.length>32){const n=[],e=t.ctx.length/32;for(let t=0;t<e;t++)n[t]=-1;return n}return-1}(t[4]),cn),C(n,f=function(t,n){const e={},o={},r={$$scope:1};let i=t.length;for(;i--;){const s=t[i],c=n[i];if(c){for(const t in s)t in c||(o[t]=1);for(const t in c)r[t]||(e[t]=c[t],r[t]=1);t[i]=c}else for(const t in s)r[t]=1}for(const t in o)t in e||(e[t]=void 0);return e}(l,[8&e&&t[3]]))},i(t){o||(tt(a,t),o=!0)},o(t){nt(a,t),o=!1},d(t){t&&$(n),a&&a.d(t),r=!1,i(s)}}}function an(t,n,o){const r=[];let i,s=a(n,r),{$$slots:c={},$$scope:u}=n;return t.$$set=t=>{n=e(e({},n),function(t){const n={};for(const e in t)"$"!==e[0]&&(n[e]=t[e]);return n}(t)),o(3,s=a(n,r)),"$$scope"in t&&o(4,u=t.$$scope)},[i,()=>{o(0,i=!0)},()=>{o(0,i=!1)},s,u,c]}class ln extends lt{constructor(t){super(),at(this,t,an,un,c,{})}}function fn(t){const n=t-1;return n*n*n+1}function dn(t){return t*t}function pn(t,{delay:e=0,duration:o=400,easing:r=n}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:r,css:t=>"opacity: "+t*i}}function gn(t,{delay:n=0,duration:e=400,easing:o=fn,start:r=0,opacity:i=0}={}){const s=getComputedStyle(t),c=+s.opacity,u="none"===s.transform?"":s.transform,a=1-r,l=c*(1-i);return{delay:n,duration:e,easing:o,css:(t,n)=>`\n\t\t\ttransform: ${u} scale(${1-a*n});\n\t\t\topacity: ${c-l*n}\n\t\t`}}const hn=[{delay:3e5,description:'"Need to make some coffee" speed'},{delay:700,description:"Dead snail on a slope"},{delay:540,description:"Snail"},{delay:400,description:"Sloth"},{delay:320,description:"Snail running from a bird"},{delay:230,description:"Turtle"},{delay:160,description:"Turtle on a skateboard"},{delay:80,description:"Regular speed"},{delay:50,description:"Fast"},{delay:30,description:"Cheetah"},{delay:20,description:"Cheetah driving a Porsche"},{delay:10,description:"M-497 Black Beetle"},{delay:4,description:"Warp 11"}];function mn(){return hn.findIndex((t=>80===t.delay))}function yn(t){let n,e,o,r,s,c,u,a,l,f,d;return{c(){n=b("div"),e=b("button"),e.textContent="－",o=k(),r=b("input"),c=k(),u=b("button"),u.textContent="＋",j(e,"class","svelte-o7aofn"),j(r,"type","range"),j(r,"min","0"),j(r,"max",s=hn.length-1),j(r,"step","1"),j(r,"class","svelte-o7aofn"),j(u,"class","svelte-o7aofn"),j(n,"class","speedControl svelte-o7aofn")},m(i,s){x(i,n,s),m(n,e),m(n,o),m(n,r),z(r,t[0]),m(n,c),m(n,u),l=!0,f||(d=[S(e,"click",t[2]),S(r,"change",t[3]),S(r,"input",t[3]),S(u,"click",t[4])],f=!0)},p(t,n){1&n&&z(r,t[0])},i(t){l||(F((()=>{a||(a=ot(n,pn,{},!0)),a.run(1)})),l=!0)},o(t){a||(a=ot(n,pn,{},!1)),a.run(0),l=!1},d(t){t&&$(n),t&&a&&a.end(),f=!1,i(d)}}}function vn(t){let n,e,o,r,s,c=hn[t[0]].description+"",u=t[5]&&yn(t);return{c(){n=b("span"),e=w(c),o=k(),u&&u.c(),r=_()},m(t,i){x(t,n,i),m(n,e),x(t,o,i),u&&u.m(t,i),x(t,r,i),s=!0},p(t,n){(!s||1&n)&&c!==(c=hn[t[0]].description+"")&&O(e,c),t[5]?u?(u.p(t,n),32&n&&tt(u,1)):(u=yn(t),u.c(),tt(u,1),u.m(r.parentNode,r)):u&&(Z={r:0,c:[],p:Z},nt(u,1,1,(()=>{u=null})),Z.r||i(Z.c),Z=Z.p)},i(t){s||(tt(u),s=!0)},o(t){nt(u),s=!1},d(t){t&&$(n),t&&$(o),u&&u.d(t),t&&$(r)}}}function xn(t){let n,e;return n=new ln({props:{class:"controls",$$slots:{default:[vn,({hovering:t})=>({5:t}),({hovering:t})=>t?32:0]},$$scope:{ctx:t}}}),{c(){it(n.$$.fragment)},m(t,o){st(n,t,o),e=!0},p(t,[e]){const o={};97&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){e||(tt(n.$$.fragment,t),e=!0)},o(t){nt(n.$$.fragment,t),e=!1},d(t){ct(n,t)}}}function $n(t,n,e){let o=mn(),{delay:r=hn[o].delay}=n;return t.$$set=t=>{"delay"in t&&e(1,r=t.delay)},t.$$.update=()=>{1&t.$$.dirty&&e(1,r=hn[o].delay)},[o,r,()=>o>0?e(0,o-=1):null,function(){var t;t=this.value,o=""===t?null:+t,e(0,o)},()=>o<hn.length-1?e(0,o+=1):null]}class bn extends lt{constructor(t){super(),at(this,t,$n,xn,c,{delay:1})}}function wn(t){return t.direction}function kn(t,n=Math.floor(1e7*Math.random())){var e;const o=function(t){return t.field}(t),r=function(t){return t.snakeSize}(t),i=function(t,n){const e=function(t,n){let e;return t.forEach(((t,o)=>{t.forEach(((t,r)=>n(t)?e={row:o,column:r}:null))})),e}(t,(t=>"snake"===(null==t?void 0:t.type)&&"head"===t.bodyPart));let o=e.column;"left"===n?o=e.column-1<0?31:e.column-1:"right"===n&&(o=e.column+1===Bt?0:e.column+1);let r=e.row;"up"===n?r=e.row-1<0?16:e.row-1:"down"===n&&(r=e.row+1===Gt?0:e.row+1);return{row:r,column:o}}(o,wn(t));if("snake"===(null===(e=o[i.row][i.column])||void 0===e?void 0:e.type)&&"tail"!=o[i.row][i.column].bodyPart)return Object.assign(Object.assign({},t),{gameOver:!0});let s=!1;const c=o.map(((n,e)=>n.map(((n,o)=>"snake"===(null==n?void 0:n.type)&&"tail"===n.bodyPart?i.row===e&&i.column===o?Object.assign(Object.assign({},Nt()),{id:n.id}):t.foodConsumed?n:Object.assign(Object.assign({},It()),{id:n.id}):"snake"===(null==n?void 0:n.type)&&"head"===n.bodyPart?Object.assign(Object.assign({},Rt({index:0})),{id:n.id}):"snake"===(null==n?void 0:n.type)&&"trunk"===n.bodyPart?n.index!==r-3||t.foodConsumed?Object.assign(Object.assign({},Rt({index:n.index+1})),{id:n.id}):Object.assign(Object.assign({},qt()),{id:n.id}):"empty"!==n.type&&"food"!==n.type||o!==i.column||e!==i.row?n:(n&&(s="food"===n.type),Object.assign(Object.assign({},Nt()),{id:n.id}))))));if(t.foodConsumed){const t=Lt(n,c);c[t.x][t.y]=Object.assign(Object.assign({},Tt()),{id:c[t.x][t.y].id})}return Object.assign(Object.assign({},t),{foodConsumed:s,field:c,snakeSize:t.foodConsumed?t.snakeSize+1:t.snakeSize,score:s?t.score+5:t.score})}function _n(t=Math.floor(1e7*Math.random())){const n=function(t,n){return new Array(n).fill(null).map((()=>new Array(t).fill(null).map((()=>It()))))}(Bt,Gt);n[8][13]=qt(),n[8][14]=Rt({index:3}),n[8][15]=Rt({index:2}),n[8][16]=Rt({index:1}),n[8][17]=Rt({index:0}),n[8][18]=Nt();const e=Lt(t,n);return n[e.x][e.y]=Tt(),{field:n,direction:"right",snakeSize:6,foodConsumed:!1,gameOver:!1,score:0}}const Sn=hn[mn()].delay,jn=()=>{};function Cn({delay:t=Sn,logger:n=jn}){const{subscribe:e,update:o}=nn(_n()),r=[];let i=t,s=!1;function c(t){return setInterval((()=>{n(`Calling setInterval handler (delay: ${t})`),function(t,n){n&&t((t=>function(t,n){const e=wn(t);return Object.assign(Object.assign({},t),{direction:(o=e,r=n,Vt.indexOf([o,r].sort().join(","))>=0?e:n)});var o,r}(t,n)))}(o,r.shift()),o((t=>{const n=kn(t);return n.gameOver&&clearInterval(u),n}))}),t)}let u=c(t);function a(t){i=t,clearInterval(u),u=c(t)}return{subscribe:e,changeDirection(t){s||r.push(t)},changeDelayBetweenMoves:a,togglePause(){s?(a(i),s=!1):(s=!0,clearInterval(u))},destroy(){clearInterval(u)}}}function On(e){let o,r,i,c,u,a,l,d,p,g,y;return{c(){o=b("div"),r=b("h1"),r.textContent="Game over",i=k(),c=b("p"),u=w("Final score: "),a=w(e[1]),l=k(),d=b("button"),d.textContent="New game",j(r,"class","svelte-a9x6lo"),j(c,"class","svelte-a9x6lo"),j(d,"class","svelte-a9x6lo"),j(o,"class","overlay svelte-a9x6lo")},m(t,n){x(t,o,n),m(o,r),m(o,i),m(o,c),m(c,u),m(c,a),m(o,l),m(o,d),g||(y=S(d,"click",(function(){s(e[2])&&e[2].apply(this,arguments)})),g=!0)},p(t,n){e=t,2&n&&O(a,e[1])},i(e){p||F((()=>{p=function(e,o,r){let i,c,u=o(e,r),a=!1,l=0;function d(){i&&N(e,i)}function p(){const{delay:o=0,duration:r=300,easing:s=n,tick:p=t,css:g}=u||et;g&&(i=P(e,0,1,r,o,s,g,l++)),p(0,1);const m=f()+o,y=m+r;c&&c.abort(),a=!0,F((()=>Q(e,!0,"start"))),c=h((t=>{if(a){if(t>=y)return p(1,0),Q(e,!0,"end"),d(),a=!1;if(t>=m){const n=s((t-m)/r);p(n,1-n)}}return a}))}let g=!1;return{start(){g||(g=!0,N(e),s(u)?(u=u(),K().then(p)):p())},invalidate(){g=!1},end(){a&&(d(),a=!1)}}}(o,gn,{duration:1500,easing:dn,start:.3}),p.start()}))},o:t,d(t){t&&$(o),g=!1,y()}}}function zn(n){let e,o=n[0]&&On(n);return{c(){o&&o.c(),e=_()},m(t,n){o&&o.m(t,n),x(t,e,n)},p(t,[n]){t[0]?o?(o.p(t,n),1&n&&tt(o,1)):(o=On(t),o.c(),tt(o,1),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i(t){tt(o)},o:t,d(t){o&&o.d(t),t&&$(e)}}}function An(t,n,e){let{gameOver:o}=n,{finalScore:r}=n,{onNewGameClick:i}=n;return t.$$set=t=>{"gameOver"in t&&e(0,o=t.gameOver),"finalScore"in t&&e(1,r=t.finalScore),"onNewGameClick"in t&&e(2,i=t.onNewGameClick)},[o,r,i]}class En extends lt{constructor(t){super(),at(this,t,An,zn,c,{gameOver:0,finalScore:1,onNewGameClick:2})}}function Dn(t){let n,e,o,r,i,s,c,u,a,l,f,d,p,g,h,y;function v(n){t[5](n)}s=new rn({props:{current:t[1].score}}),u=new Zt({props:{gameState:t[1]}});let w={};return void 0!==t[0]&&(w.delay=t[0]),l=new bn({props:w}),I.push((()=>function(t,n,e){const o=t.$$.props[n];void 0!==o&&(t.$$.bound[o]=e,e(t.$$.ctx[o]))}(l,"delay",v))),p=new En({props:{gameOver:t[1].gameOver,finalScore:t[1].score,onNewGameClick:t[3]}}),{c(){n=b("main"),e=b("h1"),e.textContent="Snake",o=k(),r=b("div"),i=b("span"),it(s.$$.fragment),c=k(),it(u.$$.fragment),a=k(),it(l.$$.fragment),d=k(),it(p.$$.fragment),j(e,"class","svelte-1nx66mc"),j(i,"class","score svelte-1nx66mc"),j(r,"class","game svelte-1nx66mc"),j(n,"class","svelte-1nx66mc")},m(f,v){x(f,n,v),m(n,e),m(n,o),m(n,r),m(r,i),st(s,i,null),m(r,c),st(u,r,null),m(n,a),st(l,n,null),m(n,d),st(p,n,null),g=!0,h||(y=S(window,"keypress",t[2]),h=!0)},p(t,[n]){const e={};2&n&&(e.current=t[1].score),s.$set(e);const o={};2&n&&(o.gameState=t[1]),u.$set(o);const r={};var i;!f&&1&n&&(f=!0,r.delay=t[0],i=()=>f=!1,G.push(i)),l.$set(r);const c={};2&n&&(c.gameOver=t[1].gameOver),2&n&&(c.finalScore=t[1].score),p.$set(c)},i(t){g||(tt(s.$$.fragment,t),tt(u.$$.fragment,t),tt(l.$$.fragment,t),tt(p.$$.fragment,t),g=!0)},o(t){nt(s.$$.fragment,t),nt(u.$$.fragment,t),nt(l.$$.fragment,t),nt(p.$$.fragment,t),g=!1},d(t){t&&$(n),ct(s),ct(u),ct(l),ct(p),h=!1,y()}}}function Mn(t,n,e){let o,r,i=Cn({});return q(i.destroy),t.$$.update=()=>{16&t.$$.dirty&&i.subscribe((t=>e(1,o=t))),17&t.$$.dirty&&i.changeDelayBetweenMoves(r)},[r,o,function(t){const n=t.key.toLowerCase();"w"===n?i.changeDirection("up"):"s"===n?i.changeDirection("down"):"d"===n?i.changeDirection("right"):"a"===n?i.changeDirection("left"):"p"===n&&i.togglePause()},function(){i.destroy(),e(4,i=Cn({}))},i,function(t){r=t,e(0,r)}]}return new class extends lt{constructor(t){super(),at(this,t,Mn,Dn,c,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
